(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[931],{7414:function(e,t,r){Promise.resolve().then(r.t.bind(r,5878,23)),Promise.resolve().then(r.t.bind(r,2972,23)),Promise.resolve().then(r.bind(r,5095))},5095:function(e,t,r){"use strict";r.d(t,{ChatProvider:function(){return g},default:function(){return h}});var s=r(7437),n=r(2265),a=r(2381),o=r(279),i=r(9820),l=r(2489),c=r(2718),d=r(8930),u=r(4743),f=r(9376);let m=(0,n.createContext)(void 0),x=()=>{let e=(0,n.useContext)(m);if(void 0===e)throw Error("useChat must be used within a ChatProvider");return e};function g(e){let{children:t}=e,[r,a]=(0,n.useState)([]),[o,i]=(0,n.useState)(!1);return(0,n.useEffect)(()=>{let e=localStorage.getItem("chat-messages"),t=localStorage.getItem("chat-is-open");if(e)try{let t=JSON.parse(e);a(t)}catch(e){console.error("Error loading saved messages:",e)}t&&i("true"===t)},[]),(0,s.jsx)(m.Provider,{value:{messages:r,setMessages:e=>{a(e),localStorage.setItem("chat-messages",JSON.stringify(e))},isOpen:o,setIsOpen:e=>{i(e),localStorage.setItem("chat-is-open",e.toString())}},children:t})}function h(){let{messages:e,setMessages:t,isOpen:r,setIsOpen:m}=x(),[g,h]=(0,n.useState)(""),[p,v]=(0,n.useState)(!1),[b,y]=(0,n.useState)(!1),j=(0,n.useRef)(null),N=()=>{var e;null===(e=j.current)||void 0===e||e.scrollIntoView({behavior:"smooth"})},{handleResponse:w}=function(){let e=(0,f.useRouter)();return{handleResponse:t=>{let r=function(e){let t=e.trim().match(/^query:\s*<(.+)>$/i);return t?"/".concat(t[1]):null}(t);return r?(e.push(r),{skip:!0}):{skip:!1}}}}();(0,n.useEffect)(()=>{N()},[e]);let C=async r=>{if(r.preventDefault(),!g.trim()||p)return;let s=[...e,{role:"user",text:g.trim(),timestamp:Date.now()}];t(s),h(""),v(!0);try{let e=await fetch("/api/ai",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({chats:s.map(e=>({role:e.role,text:e.text}))})});if(!e.ok)throw Error("Failed to send message");let r=await e.json();if(w(r.response).skip){v(!1);return}let n={role:"model",text:r.response,timestamp:Date.now()};t([...s,n])}catch(e){console.error("Error sending message:",e),t([...s,{role:"model",text:"Sorry, I encountered an error. Please try again.",timestamp:Date.now()}])}finally{v(!1)}};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)(a.z,{onClick:()=>m(!r),className:"fixed bottom-6 right-6 h-14 w-14 rounded-full shadow-lg hover:shadow-xl transition-all duration-200 z-50",size:"icon",children:[r?(0,s.jsx)(l.Z,{className:"h-6 w-6"}):(0,s.jsx)(c.Z,{className:"h-6 w-6"}),e.length>0&&!r&&(0,s.jsx)("div",{className:"absolute -top-2 -right-2 bg-red-500 text-white text-xs rounded-full h-6 w-6 flex items-center justify-center",children:e.length>99?"99+":e.length})]}),r&&(0,s.jsxs)(i.Zb,{className:"fixed bottom-24 right-6 w-80 min-h-96 h-auto shadow-2xl z-40 flex flex-col",children:[(0,s.jsxs)(i.Ol,{className:"pb-3 flex flex-row items-center justify-between",children:[(0,s.jsx)(i.ll,{className:"text-lg",children:"AI Chat"}),e.length>0&&(0,s.jsxs)(a.z,{variant:b?"destructive":"ghost",size:"sm",onClick:()=>{b?(t([]),localStorage.removeItem("chat-messages"),y(!1)):(y(!0),setTimeout(()=>y(!1),3e3))},className:"text-xs flex items-center gap-1",children:[(0,s.jsx)(d.Z,{className:"h-3 w-3"}),b?"Confirm?":"Clear"]})]}),(0,s.jsxs)(i.aY,{className:"flex-1 flex flex-col p-0",children:[(0,s.jsxs)("div",{className:"flex-1 overflow-y-auto px-4 pb-2 space-y-3 max-h-64",children:[0===e.length&&(0,s.jsxs)("div",{className:"text-center text-gray-500 text-sm mt-8",children:["Start a conversation with AI",(0,s.jsx)("br",{}),(0,s.jsx)("span",{className:"text-xs",children:"Messages are saved automatically"})]}),e.map((e,t)=>(0,s.jsx)("div",{className:"flex ".concat("user"===e.role?"justify-end":"justify-start"),children:(0,s.jsx)("div",{className:"max-w-[80%] p-3 rounded-lg text-sm ".concat("user"===e.role?"bg-blue-500 text-white rounded-br-sm":"bg-gray-100 text-gray-800 rounded-bl-sm"),children:e.text})},"".concat(e.timestamp,"-").concat(t))),p&&(0,s.jsx)("div",{className:"flex justify-start",children:(0,s.jsx)("div",{className:"bg-gray-100 text-gray-800 p-3 rounded-lg rounded-bl-sm text-sm",children:(0,s.jsxs)("div",{className:"flex space-x-1",children:[(0,s.jsx)("div",{className:"w-2 h-2 bg-gray-400 rounded-full animate-bounce"}),(0,s.jsx)("div",{className:"w-2 h-2 bg-gray-400 rounded-full animate-bounce",style:{animationDelay:"0.1s"}}),(0,s.jsx)("div",{className:"w-2 h-2 bg-gray-400 rounded-full animate-bounce",style:{animationDelay:"0.2s"}})]})})}),(0,s.jsx)("div",{ref:j})]}),(0,s.jsx)("form",{onSubmit:C,className:"p-4 border-t",children:(0,s.jsxs)("div",{className:"flex space-x-2",children:[(0,s.jsx)(o.I,{value:g,type:"text",autoComplete:"off",onChange:e=>h(e.target.value),placeholder:"Type your message...",disabled:p,className:"flex-1"}),(0,s.jsx)(a.z,{type:"submit",size:"icon",disabled:p||!g.trim(),children:(0,s.jsx)(u.Z,{className:"h-4 w-4"})})]})})]})]})]})}},2381:function(e,t,r){"use strict";r.d(t,{d:function(){return l},z:function(){return c}});var s=r(7437),n=r(2265),a=r(7053),o=r(535),i=r(3448);let l=(0,o.j)("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),c=n.forwardRef((e,t)=>{let{className:r,variant:n,size:o,asChild:c=!1,...d}=e,u=c?a.g7:"button";return(0,s.jsx)(u,{className:(0,i.cn)(l({variant:n,size:o,className:r})),ref:t,...d})});c.displayName="Button"},9820:function(e,t,r){"use strict";r.d(t,{Ol:function(){return i},SZ:function(){return c},Zb:function(){return o},aY:function(){return d},ll:function(){return l}});var s=r(7437),n=r(2265),a=r(3448);let o=n.forwardRef((e,t)=>{let{className:r,...n}=e;return(0,s.jsx)("div",{ref:t,className:(0,a.cn)("rounded-lg border bg-card text-card-foreground shadow-sm",r),...n})});o.displayName="Card";let i=n.forwardRef((e,t)=>{let{className:r,...n}=e;return(0,s.jsx)("div",{ref:t,className:(0,a.cn)("flex flex-col space-y-1.5 p-6",r),...n})});i.displayName="CardHeader";let l=n.forwardRef((e,t)=>{let{className:r,...n}=e;return(0,s.jsx)("div",{ref:t,className:(0,a.cn)("text-2xl font-semibold leading-none tracking-tight",r),...n})});l.displayName="CardTitle";let c=n.forwardRef((e,t)=>{let{className:r,...n}=e;return(0,s.jsx)("div",{ref:t,className:(0,a.cn)("text-sm text-muted-foreground",r),...n})});c.displayName="CardDescription";let d=n.forwardRef((e,t)=>{let{className:r,...n}=e;return(0,s.jsx)("div",{ref:t,className:(0,a.cn)("p-6 pt-0",r),...n})});d.displayName="CardContent",n.forwardRef((e,t)=>{let{className:r,...n}=e;return(0,s.jsx)("div",{ref:t,className:(0,a.cn)("flex items-center p-6 pt-0",r),...n})}).displayName="CardFooter"},279:function(e,t,r){"use strict";r.d(t,{I:function(){return o}});var s=r(7437),n=r(2265),a=r(3448);let o=n.forwardRef((e,t)=>{let{className:r,type:n,...o}=e;return(0,s.jsx)("input",{type:n,className:(0,a.cn)("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-base ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-foreground placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",r),ref:t,...o})});o.displayName="Input"},3448:function(e,t,r){"use strict";r.d(t,{cn:function(){return a}});var s=r(1994),n=r(3335);function a(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];return(0,n.m6)((0,s.W)(t))}}},function(e){e.O(0,[14,972,314,971,117,744],function(){return e(e.s=7414)}),_N_E=e.O()}]);