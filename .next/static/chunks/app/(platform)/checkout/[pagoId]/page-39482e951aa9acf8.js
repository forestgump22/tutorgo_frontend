(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[987],{2240:function(e,t,r){Promise.resolve().then(r.bind(r,1301))},9322:function(e,t,r){"use strict";r.d(t,{Z:function(){return n}});let n=(0,r(9205).Z)("circle-alert",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]])},1671:function(e,t,r){"use strict";r.d(t,{Z:function(){return n}});let n=(0,r(9205).Z)("circle-check-big",[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]])},1817:function(e,t,r){"use strict";r.d(t,{Z:function(){return n}});let n=(0,r(9205).Z)("loader-circle",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]])},6337:function(e,t,r){"use strict";r.d(t,{Z:function(){return n}});let n=(0,r(9205).Z)("lock",[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]])},9376:function(e,t,r){"use strict";var n=r(5475);r.o(n,"useParams")&&r.d(t,{useParams:function(){return n.useParams}}),r.o(n,"usePathname")&&r.d(t,{usePathname:function(){return n.usePathname}}),r.o(n,"useRouter")&&r.d(t,{useRouter:function(){return n.useRouter}}),r.o(n,"useSearchParams")&&r.d(t,{useSearchParams:function(){return n.useSearchParams}})},1301:function(e,t,r){"use strict";r.r(t),r.d(t,{default:function(){return p}});var n=r(7437),a=r(2265),s=r(9376),o=r(5912),i=r(8635),l=r(2381),c=r(9820),u=r(1817),d=r(1671),f=r(9322),m=r(6337);function p(){let e=(0,s.useParams)(),t=(0,s.useRouter)(),r=Number(e.pagoId),[p,h]=(0,a.useState)(null),[x,g]=(0,a.useState)(!0),[v,y]=(0,a.useState)(!1),[N,j]=(0,a.useState)(null),[b,w]=(0,a.useState)(!1);(0,a.useEffect)(()=>{if(isNaN(r)){j("ID de pago inv\xe1lido."),g(!1);return}(0,o.G)(r).then(e=>{"PENDIENTE"!==e.tipoEstado&&j("Este pago ya ha sido procesado o ha caducado."),h(e)}).catch(e=>j(e.message)).finally(()=>g(!1))},[r]);let k=async()=>{y(!0),j(null);try{await (0,i.V)(r),w(!0)}catch(e){j(e.message)}finally{y(!1)}};return x?(0,n.jsx)("div",{className:"text-center p-10",children:(0,n.jsx)(u.Z,{className:"h-12 w-12 animate-spin text-primary"})}):b?(0,n.jsx)("div",{className:"flex items-center justify-center min-h-screen",children:(0,n.jsx)(c.Zb,{className:"max-w-md mx-auto text-center shadow-lg",children:(0,n.jsxs)(c.aY,{className:"p-8",children:[(0,n.jsx)(d.Z,{className:"text-green-500 h-16 w-16 mx-auto mb-4"}),(0,n.jsx)("h1",{className:"text-2xl font-bold",children:"\xa1Pago Exitoso!"}),(0,n.jsx)("p",{className:"text-muted-foreground mt-2",children:'Tu tutor\xeda ha sido confirmada. Puedes ver los detalles en tu secci\xf3n de "Mis Tutor\xedas".'}),(0,n.jsx)(l.z,{onClick:()=>t.push("/mis-tutorias"),className:"mt-6 w-full",children:"Ir a Mis Tutor\xedas"})]})})}):N||!p?(0,n.jsx)("div",{className:"flex items-center justify-center min-h-screen",children:(0,n.jsx)(c.Zb,{className:"max-w-md mx-auto text-center shadow-lg border-destructive",children:(0,n.jsxs)(c.aY,{className:"p-8",children:[(0,n.jsx)(f.Z,{className:"text-destructive h-16 w-16 mx-auto mb-4"}),(0,n.jsx)("h1",{className:"text-2xl font-bold",children:"Ocurri\xf3 un Error"}),(0,n.jsx)("p",{className:"text-muted-foreground mt-2",children:N||"No se encontraron los detalles del pago."}),(0,n.jsx)(l.z,{onClick:()=>t.push("/buscar-tutores"),className:"mt-6 w-full",variant:"outline",children:"Volver a Buscar"})]})})}):(0,n.jsx)("div",{className:"flex items-center justify-center min-h-screen bg-secondary/30",children:(0,n.jsxs)(c.Zb,{className:"w-full max-w-lg mx-auto shadow-2xl",children:[(0,n.jsxs)(c.Ol,{children:[(0,n.jsx)(c.ll,{className:"text-2xl font-bold",children:"Confirmar y Pagar"}),(0,n.jsx)(c.SZ,{children:"Est\xe1s a un paso de reservar tu tutor\xeda."})]}),(0,n.jsxs)(c.aY,{children:[(0,n.jsxs)("div",{className:"bg-secondary/50 p-4 rounded-lg mb-6 space-y-3",children:[(0,n.jsxs)("div",{children:[(0,n.jsx)("p",{className:"text-sm font-medium text-muted-foreground",children:"Tutor"}),(0,n.jsx)("p",{className:"font-semibold",children:p.nombreTutor})]}),(0,n.jsxs)("div",{children:[(0,n.jsx)("p",{className:"text-sm font-medium text-muted-foreground",children:"Descripci\xf3n"}),(0,n.jsx)("p",{className:"font-semibold",children:p.descripcion})]})]}),(0,n.jsx)(c.Zb,{className:"bg-background",children:(0,n.jsx)(c.aY,{className:"p-6",children:(0,n.jsxs)("div",{className:"flex justify-between items-center",children:[(0,n.jsx)("p",{className:"text-lg font-semibold",children:"Total a Pagar"}),(0,n.jsxs)("p",{className:"text-2xl font-bold text-primary",children:["S/ ",p.monto.toFixed(2)]})]})})}),(0,n.jsxs)("div",{className:"mt-6",children:[(0,n.jsxs)(l.z,{onClick:k,disabled:v,className:"w-full",size:"lg",children:[v?(0,n.jsx)(u.Z,{className:"mr-2 h-4 w-4 animate-spin"}):(0,n.jsx)(m.Z,{className:"mr-2 h-4 w-4"}),v?"Procesando...":"Pagar Ahora"]}),(0,n.jsx)("p",{className:"text-xs text-muted-foreground mt-2 text-center",children:"Simulaci\xf3n de pasarela de pago segura."})]})]})]})})}},2381:function(e,t,r){"use strict";r.d(t,{d:function(){return l},z:function(){return c}});var n=r(7437),a=r(2265),s=r(7053),o=r(535),i=r(3448);let l=(0,o.j)("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),c=a.forwardRef((e,t)=>{let{className:r,variant:a,size:o,asChild:c=!1,...u}=e,d=c?s.g7:"button";return(0,n.jsx)(d,{className:(0,i.cn)(l({variant:a,size:o,className:r})),ref:t,...u})});c.displayName="Button"},9820:function(e,t,r){"use strict";r.d(t,{Ol:function(){return i},SZ:function(){return c},Zb:function(){return o},aY:function(){return u},ll:function(){return l}});var n=r(7437),a=r(2265),s=r(3448);let o=a.forwardRef((e,t)=>{let{className:r,...a}=e;return(0,n.jsx)("div",{ref:t,className:(0,s.cn)("rounded-lg border bg-card text-card-foreground shadow-sm",r),...a})});o.displayName="Card";let i=a.forwardRef((e,t)=>{let{className:r,...a}=e;return(0,n.jsx)("div",{ref:t,className:(0,s.cn)("flex flex-col space-y-1.5 p-6",r),...a})});i.displayName="CardHeader";let l=a.forwardRef((e,t)=>{let{className:r,...a}=e;return(0,n.jsx)("div",{ref:t,className:(0,s.cn)("text-2xl font-semibold leading-none tracking-tight",r),...a})});l.displayName="CardTitle";let c=a.forwardRef((e,t)=>{let{className:r,...a}=e;return(0,n.jsx)("div",{ref:t,className:(0,s.cn)("text-sm text-muted-foreground",r),...a})});c.displayName="CardDescription";let u=a.forwardRef((e,t)=>{let{className:r,...a}=e;return(0,n.jsx)("div",{ref:t,className:(0,s.cn)("p-6 pt-0",r),...a})});u.displayName="CardContent",a.forwardRef((e,t)=>{let{className:r,...a}=e;return(0,n.jsx)("div",{ref:t,className:(0,s.cn)("flex items-center p-6 pt-0",r),...a})}).displayName="CardFooter"},1837:function(e,t,r){"use strict";var n=r(3464),a=r(1614);let s=n.Z.create({baseURL:"https://tutorgo-api.onrender.com/api/v1",headers:{"Content-Type":"application/json"}});console.log(s.defaults.baseURL),s.interceptors.request.use(e=>{let t=(0,a.getCookie)("token");return t&&(e.headers.Authorization="Bearer ".concat(t)),e},e=>Promise.reject(e)),t.Z=s},3448:function(e,t,r){"use strict";r.d(t,{cn:function(){return s}});var n=r(1994),a=r(3335);function s(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];return(0,a.m6)((0,n.W)(t))}},5912:function(e,t,r){"use strict";r.d(t,{G:function(){return s},a:function(){return a}});var n=r(1837);let a=async(e,t)=>{try{let r=new URLSearchParams;return e&&r.append("query",e),t&&"all"!==t&&r.append("estado",t.toUpperCase()),(await n.Z.get("/pagos/historial?".concat(r.toString()))).data||[]}catch(e){var r,a,s;if((null===(r=e.response)||void 0===r?void 0:r.status)===204)return[];throw Error((null===(s=e.response)||void 0===s?void 0:null===(a=s.data)||void 0===a?void 0:a.message)||"No se pudo cargar tu historial de pagos.")}},s=async e=>{try{return(await n.Z.get("/pagos/".concat(e,"/details"))).data}catch(e){var t,r;throw Error((null===(r=e.response)||void 0===r?void 0:null===(t=r.data)||void 0===t?void 0:t.message)||"No se pudieron obtener los detalles del pago.")}}},8635:function(e,t,r){"use strict";r.d(t,{L:function(){return a},V:function(){return s}});var n=r(1837);let a=async e=>{try{let t=await n.Z.post("/reservas/iniciar-pago",e);if(t.data&&t.data.success)return t.data.data;throw Error(t.data.message||"La respuesta del servidor no fue la esperada.")}catch(e){var t,r;throw Error((null===(r=e.response)||void 0===r?void 0:null===(t=r.data)||void 0===t?void 0:t.message)||"No se pudo iniciar la reserva.")}},s=async e=>{try{let t=await n.Z.post("/reservas/confirmar-pago/".concat(e));if(t.data&&t.data.success)return t.data.data;throw Error(t.data.message||"La respuesta del servidor no fue la esperada.")}catch(e){var t,r;throw Error((null===(r=e.response)||void 0===r?void 0:null===(t=r.data)||void 0===t?void 0:t.message)||"El pago no pudo ser confirmado.")}}},8575:function(e,t,r){"use strict";r.d(t,{F:function(){return s},e:function(){return o}});var n=r(2265);function a(e,t){if("function"==typeof e)return e(t);null!=e&&(e.current=t)}function s(...e){return t=>{let r=!1,n=e.map(e=>{let n=a(e,t);return r||"function"!=typeof n||(r=!0),n});if(r)return()=>{for(let t=0;t<n.length;t++){let r=n[t];"function"==typeof r?r():a(e[t],null)}}}}function o(...e){return n.useCallback(s(...e),e)}},7053:function(e,t,r){"use strict";r.d(t,{g7:function(){return o}});var n=r(2265),a=r(8575),s=r(7437),o=n.forwardRef((e,t)=>{let{children:r,...a}=e,o=n.Children.toArray(r),l=o.find(c);if(l){let e=l.props.children,r=o.map(t=>t!==l?t:n.Children.count(e)>1?n.Children.only(null):n.isValidElement(e)?e.props.children:null);return(0,s.jsx)(i,{...a,ref:t,children:n.isValidElement(e)?n.cloneElement(e,void 0,r):null})}return(0,s.jsx)(i,{...a,ref:t,children:r})});o.displayName="Slot";var i=n.forwardRef((e,t)=>{let{children:r,...s}=e;if(n.isValidElement(r)){let e,o;let i=(e=Object.getOwnPropertyDescriptor(r.props,"ref")?.get)&&"isReactWarning"in e&&e.isReactWarning?r.ref:(e=Object.getOwnPropertyDescriptor(r,"ref")?.get)&&"isReactWarning"in e&&e.isReactWarning?r.props.ref:r.props.ref||r.ref;return n.cloneElement(r,{...function(e,t){let r={...t};for(let n in t){let a=e[n],s=t[n];/^on[A-Z]/.test(n)?a&&s?r[n]=(...e)=>{s(...e),a(...e)}:a&&(r[n]=a):"style"===n?r[n]={...a,...s}:"className"===n&&(r[n]=[a,s].filter(Boolean).join(" "))}return{...e,...r}}(s,r.props),ref:t?(0,a.F)(t,i):i})}return n.Children.count(r)>1?n.Children.only(null):null});i.displayName="SlotClone";var l=({children:e})=>(0,s.jsx)(s.Fragment,{children:e});function c(e){return n.isValidElement(e)&&e.type===l}}},function(e){e.O(0,[144,14,971,117,744],function(){return e(e.s=2240)}),_N_E=e.O()}]);