(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[50],{720:function(e,r,t){Promise.resolve().then(t.bind(t,5742))},5742:function(e,r,t){"use strict";t.r(r),t.d(r,{default:function(){return p}});var s=t(7437),n=t(2265),a=t(2223),l=t(1837);let i=async()=>{try{return(await l.Z.get("/dashboard/stats")).data}catch(t){var e,r;throw console.error("Error al cargar las estad\xedsticas del dashboard:",t),Error((null===(r=t.response)||void 0===r?void 0:null===(e=r.data)||void 0===e?void 0:e.message)||"No se pudieron cargar los datos del dashboard.")}};var o=t(7648),d=t(9820),c=t(2381),u=t(6246),f=t(1817),m=t(1047),x=t(8226),h=t(6595),g=t(1671),j=t(407);function p(){var e,r,t;let{user:l,isLoading:p}=(0,a.t)(),[v,b]=(0,n.useState)(null),[N,y]=(0,n.useState)(!0);if((0,n.useEffect)(()=>{l&&(y(!0),i().then(b).catch(console.error).finally(()=>y(!1)))},[l]),p||N&&l)return(0,s.jsx)("div",{className:"flex items-center justify-center h-full py-20",children:(0,s.jsx)(f.Z,{className:"h-12 w-12 animate-spin text-primary"})});if(!l)return(0,s.jsx)("p",{children:"Error al cargar usuario."});let w="TUTOR"===l.rol;return(0,s.jsxs)("div",{className:"space-y-8",children:[(0,s.jsxs)("div",{children:[(0,s.jsxs)("h1",{className:"text-3xl font-bold text-gray-800",children:["\xa1Bienvenido, ",l.nombre.split(" ")[0],"!"]}),(0,s.jsx)("p",{className:"text-muted-foreground",children:"Aqu\xed tienes un resumen de tu actividad en TutorGO."})]}),(0,s.jsx)("div",{className:"grid gap-6 md:grid-cols-2 lg:grid-cols-3",children:w?(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)(d.Zb,{children:[(0,s.jsxs)(d.Ol,{className:"flex flex-row items-center justify-between pb-2",children:[(0,s.jsx)(d.ll,{className:"text-sm font-medium",children:"Pr\xf3xima Clase"}),(0,s.jsx)(m.Z,{className:"h-4 w-4 text-muted-foreground"})]}),(0,s.jsx)(d.aY,{children:(0,s.jsx)("p",{className:"text-lg font-bold truncate",children:null==v?void 0:v.proximaClaseInfo})})]}),(0,s.jsxs)(d.Zb,{children:[(0,s.jsxs)(d.Ol,{className:"flex flex-row items-center justify-between pb-2",children:[(0,s.jsx)(d.ll,{className:"text-sm font-medium",children:"Ingresos del Mes"}),(0,s.jsx)(x.Z,{className:"h-4 w-4 text-muted-foreground"})]}),(0,s.jsx)(d.aY,{children:(0,s.jsxs)("p",{className:"text-2xl font-bold",children:["S/ ",(null==v?void 0:null===(e=v.ingresosEsteMes)||void 0===e?void 0:e.toFixed(2))||"0.00"]})})]}),(0,s.jsxs)(d.Zb,{children:[(0,s.jsxs)(d.Ol,{className:"flex flex-row items-center justify-between pb-2",children:[(0,s.jsx)(d.ll,{className:"text-sm font-medium",children:"Mi Calificaci\xf3n"}),(0,s.jsx)(h.Z,{className:"h-4 w-4 text-muted-foreground"})]}),(0,s.jsx)(d.aY,{children:(0,s.jsx)("p",{className:"text-2xl font-bold",children:(null==v?void 0:null===(r=v.calificacionPromedio)||void 0===r?void 0:r.toFixed(1))||"N/A"})})]})]}):(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)(d.Zb,{children:[(0,s.jsxs)(d.Ol,{className:"flex flex-row items-center justify-between pb-2",children:[(0,s.jsx)(d.ll,{className:"text-sm font-medium",children:"Pr\xf3xima Tutor\xeda"}),(0,s.jsx)(m.Z,{className:"h-4 w-4 text-muted-foreground"})]}),(0,s.jsx)(d.aY,{children:(0,s.jsx)("p",{className:"text-lg font-bold truncate",children:null==v?void 0:v.proximaTutoriaInfo})})]}),(0,s.jsxs)(d.Zb,{children:[(0,s.jsxs)(d.Ol,{className:"flex flex-row items-center justify-between pb-2",children:[(0,s.jsx)(d.ll,{className:"text-sm font-medium",children:"Tutor\xedas Completadas"}),(0,s.jsx)(g.Z,{className:"h-4 w-4 text-muted-foreground"})]}),(0,s.jsx)(d.aY,{children:(0,s.jsx)("p",{className:"text-2xl font-bold",children:(null==v?void 0:v.tutoriasCompletadas)||0})})]})]})}),(0,s.jsxs)("div",{className:"pt-8",children:[(0,s.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,s.jsx)("h2",{className:"text-2xl font-bold text-gray-800",children:"Tutores Destacados"}),(0,s.jsx)(c.z,{variant:"ghost",asChild:!0,children:(0,s.jsxs)(o.default,{href:"/buscar-tutores",children:["Ver todos ",(0,s.jsx)(j.Z,{className:"h-4 w-4 ml-1"})]})})]}),N?(0,s.jsx)("p",{children:"Cargando tutores..."}):(0,s.jsx)("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-6",children:null==v?void 0:null===(t=v.tutoresDestacados)||void 0===t?void 0:t.map(e=>(0,s.jsx)(d.Zb,{className:"hover:shadow-lg transition-shadow",children:(0,s.jsxs)(d.aY,{className:"p-4 text-center",children:[(0,s.jsxs)(u.Avatar,{className:"w-20 h-20 mx-auto mb-4",children:[(0,s.jsx)(u.AvatarImage,{src:e.fotoUrlUsuario||"",alt:e.nombreUsuario}),(0,s.jsx)(u.AvatarFallback,{children:e.nombreUsuario.charAt(0)})]}),(0,s.jsx)("h3",{className:"font-semibold text-lg",children:e.nombreUsuario}),(0,s.jsx)("p",{className:"text-sm text-muted-foreground mb-2",children:e.rubro}),(0,s.jsxs)("div",{className:"flex items-center justify-center text-sm",children:[(0,s.jsx)(h.Z,{className:"h-4 w-4 text-yellow-400 fill-current mr-1"}),(0,s.jsx)("span",{children:e.estrellasPromedio.toFixed(1)})]})]})},e.tutorId))})]})]})}},6246:function(e,r,t){"use strict";t.d(r,{Avatar:function(){return i},AvatarFallback:function(){return d},AvatarImage:function(){return o}});var s=t(7437),n=t(2265),a=t(4930),l=t(3448);let i=n.forwardRef((e,r)=>{let{className:t,...n}=e;return(0,s.jsx)(a.fC,{ref:r,className:(0,l.cn)("relative flex h-10 w-10 shrink-0 overflow-hidden rounded-full",t),...n})});i.displayName=a.fC.displayName;let o=n.forwardRef((e,r)=>{let{className:t,...n}=e;return(0,s.jsx)(a.Ee,{ref:r,className:(0,l.cn)("aspect-square h-full w-full",t),...n})});o.displayName=a.Ee.displayName;let d=n.forwardRef((e,r)=>{let{className:t,...n}=e;return(0,s.jsx)(a.NY,{ref:r,className:(0,l.cn)("flex h-full w-full items-center justify-center rounded-full bg-muted",t),...n})});d.displayName=a.NY.displayName},2381:function(e,r,t){"use strict";t.d(r,{d:function(){return o},z:function(){return d}});var s=t(7437),n=t(2265),a=t(7053),l=t(535),i=t(3448);let o=(0,l.j)("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),d=n.forwardRef((e,r)=>{let{className:t,variant:n,size:l,asChild:d=!1,...c}=e,u=d?a.g7:"button";return(0,s.jsx)(u,{className:(0,i.cn)(o({variant:n,size:l,className:t})),ref:r,...c})});d.displayName="Button"},9820:function(e,r,t){"use strict";t.d(r,{Ol:function(){return i},SZ:function(){return d},Zb:function(){return l},aY:function(){return c},ll:function(){return o}});var s=t(7437),n=t(2265),a=t(3448);let l=n.forwardRef((e,r)=>{let{className:t,...n}=e;return(0,s.jsx)("div",{ref:r,className:(0,a.cn)("rounded-lg border bg-card text-card-foreground shadow-sm",t),...n})});l.displayName="Card";let i=n.forwardRef((e,r)=>{let{className:t,...n}=e;return(0,s.jsx)("div",{ref:r,className:(0,a.cn)("flex flex-col space-y-1.5 p-6",t),...n})});i.displayName="CardHeader";let o=n.forwardRef((e,r)=>{let{className:t,...n}=e;return(0,s.jsx)("div",{ref:r,className:(0,a.cn)("text-2xl font-semibold leading-none tracking-tight",t),...n})});o.displayName="CardTitle";let d=n.forwardRef((e,r)=>{let{className:t,...n}=e;return(0,s.jsx)("div",{ref:r,className:(0,a.cn)("text-sm text-muted-foreground",t),...n})});d.displayName="CardDescription";let c=n.forwardRef((e,r)=>{let{className:t,...n}=e;return(0,s.jsx)("div",{ref:r,className:(0,a.cn)("p-6 pt-0",t),...n})});c.displayName="CardContent",n.forwardRef((e,r)=>{let{className:t,...n}=e;return(0,s.jsx)("div",{ref:r,className:(0,a.cn)("flex items-center p-6 pt-0",t),...n})}).displayName="CardFooter"},1837:function(e,r,t){"use strict";var s=t(3464),n=t(1614);let a=s.Z.create({baseURL:"https://tutorgo-api.onrender.com/api/v1",headers:{"Content-Type":"application/json"}});console.log(a.defaults.baseURL),a.interceptors.request.use(e=>{let r=(0,n.getCookie)("token");return r&&(e.headers.Authorization="Bearer ".concat(r)),e},e=>Promise.reject(e)),r.Z=a},3448:function(e,r,t){"use strict";t.d(r,{cn:function(){return a}});var s=t(1994),n=t(3335);function a(){for(var e=arguments.length,r=Array(e),t=0;t<e;t++)r[t]=arguments[t];return(0,n.m6)((0,s.W)(r))}},2223:function(e,r,t){"use strict";t.d(r,{t:function(){return l}});var s=t(9625),n=t(1614),a=t(4474);let l=(0,s.Ue)((e,r)=>({token:null,user:null,isLoading:!0,setAuth:(r,t)=>{e({token:r,user:t,isLoading:!1})},logout:()=>{e({token:null,user:null,isLoading:!1})},hydrateAuth:()=>{{let r=(0,n.getCookie)("token");if(r)try{let t=(0,a.o)(r),s="ESTUDIANTE";t.roles&&t.roles.toUpperCase().includes("TUTOR")&&(s="TUTOR");let n={id:t.userId,email:t.sub,nombre:t.nombre,rol:s};e({token:r,user:n,isLoading:!1})}catch(r){console.error("Error decodificando token al hidratar o token inv\xe1lido:",r),(0,n.deleteCookie)("token",{path:"/"}),e({token:null,user:null,isLoading:!1})}else e({isLoading:!1})}},isAuthenticated:()=>!!r().token,updateUser:r=>{e(e=>({...e,user:r}))}}))}},function(e){e.O(0,[144,14,972,968,971,117,744],function(){return e(e.s=720)}),_N_E=e.O()}]);