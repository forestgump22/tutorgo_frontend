(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[441],{1237:function(e,t,r){Promise.resolve().then(r.bind(r,7266)),Promise.resolve().then(r.bind(r,6246))},1047:function(e,t,r){"use strict";r.d(t,{Z:function(){return a}});let a=(0,r(9205).Z)("calendar",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]])},9322:function(e,t,r){"use strict";r.d(t,{Z:function(){return a}});let a=(0,r(9205).Z)("circle-alert",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]])},8226:function(e,t,r){"use strict";r.d(t,{Z:function(){return a}});let a=(0,r(9205).Z)("credit-card",[["rect",{width:"20",height:"14",x:"2",y:"5",rx:"2",key:"ynyp8z"}],["line",{x1:"2",x2:"22",y1:"10",y2:"10",key:"1b3vmo"}]])},9376:function(e,t,r){"use strict";var a=r(5475);r.o(a,"useParams")&&r.d(t,{useParams:function(){return a.useParams}}),r.o(a,"usePathname")&&r.d(t,{usePathname:function(){return a.usePathname}}),r.o(a,"useRouter")&&r.d(t,{useRouter:function(){return a.useRouter}}),r.o(a,"useSearchParams")&&r.d(t,{useSearchParams:function(){return a.useSearchParams}})},7266:function(e,t,r){"use strict";r.d(t,{ReservaTutoria:function(){return N}});var a=r(7437),s=r(2265),n=r(9376),i=r(5181),o=r(8635),l=r(9820),d=r(2381),c=r(5291),u=r(5937),f=r(5060),m=r(1047),p=r(1817),h=r(9205);let x=(0,h.Z)("minus",[["path",{d:"M5 12h14",key:"1ays0h"}]]),v=(0,h.Z)("plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);var g=r(9322),y=r(8226);function N(e){let{tutorId:t,tarifaHora:r}=e,h=(0,n.useRouter)(),[N,b]=(0,s.useState)([]),[w,j]=(0,s.useState)(!0),[k,R]=(0,s.useState)(null),[Z,S]=(0,s.useState)(""),[C,_]=(0,s.useState)(1),[P,E]=(0,s.useState)(null),[z,T]=(0,s.useState)(!1);(0,s.useEffect)(()=>{(0,i.a)(t).then(e=>b(e)).catch(e=>E(e.message||"No se pudo cargar la disponibilidad. Intenta recargar.")).finally(()=>j(!1))},[t]);let A=(0,s.useMemo)(()=>{if(!k)return[];let e=[],t=new Date(k.horaInicial),r=new Date(k.horaFinal);for(;t<r;)e.push(t.toTimeString().split(" ")[0]),t.setHours(t.getHours()+1);return e},[k]),D=(0,s.useMemo)(()=>(r||0)*C,[r,C]),L=e=>{R(e),S(""),_(1),E(null)},F=async()=>{if(!k||!Z){E("Por favor, selecciona una hora de inicio.");return}T(!0),E(null);let e=k.fecha,r=new Date(e+"T"+Z);r.setHours(r.getHours()+C);let a={tutorId:t,fecha:e,horaInicio:Z,horaFinal:r.toTimeString().split(" ")[0]};try{let e=await (0,o.L)(a);h.push("/checkout/".concat(e.id))}catch(e){E(e.message),T(!1)}},M=e=>new Date(e+"T00:00:00").toLocaleDateString("es-ES",{weekday:"long",day:"numeric",month:"long"}),I=e=>new Date(e).toLocaleTimeString("es-ES",{hour:"2-digit",minute:"2-digit"});return(0,a.jsxs)(l.Zb,{className:"shadow-lg",children:[(0,a.jsx)(l.Ol,{children:(0,a.jsxs)(l.ll,{className:"flex items-center gap-2",children:[(0,a.jsx)(m.Z,{className:"h-5 w-5 text-primary"}),"Reserva tu Tutor\xeda"]})}),(0,a.jsx)(l.aY,{className:"space-y-6",children:w?(0,a.jsx)("div",{className:"flex items-center justify-center py-8",children:(0,a.jsx)(p.Z,{className:"h-6 w-6 animate-spin"})}):(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)("div",{children:[(0,a.jsx)(f._,{className:"font-semibold text-card-foreground",children:"1. Elige un d\xeda disponible"}),(0,a.jsx)("div",{className:"space-y-2 mt-2",children:N.length>0?N.map(e=>(0,a.jsxs)("div",{onClick:()=>L(e),className:"p-3 border rounded-lg cursor-pointer transition-all ".concat((null==k?void 0:k.id)===e.id?"bg-primary text-primary-foreground shadow-md":"bg-secondary/50 hover:bg-secondary"),children:[(0,a.jsx)("p",{className:"font-semibold",children:M(e.fecha)}),(0,a.jsxs)("p",{className:"text-sm opacity-90",children:[I(e.horaInicial)," - ",I(e.horaFinal)]})]},e.id)):(0,a.jsx)("p",{className:"text-sm text-muted-foreground p-3 bg-secondary/50 rounded-md",children:"Este tutor no tiene horarios disponibles."})})]}),k&&(0,a.jsxs)("div",{className:"space-y-4 pt-4 border-t animate-in fade-in-50",children:[(0,a.jsx)(f._,{className:"font-semibold text-card-foreground",children:"2. Configura tu sesi\xf3n"}),(0,a.jsxs)("div",{className:"grid grid-cols-1 gap-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)(f._,{htmlFor:"horaInicio",className:"text-sm",children:"Hora de inicio"}),(0,a.jsxs)(c.Ph,{value:Z,onValueChange:S,children:[(0,a.jsx)(c.i4,{children:(0,a.jsx)(c.ki,{placeholder:"Selecciona"})}),(0,a.jsx)(c.Bw,{children:A.map(e=>(0,a.jsx)(c.Ql,{value:e,children:e},e))})]})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)(f._,{className:"text-sm",children:"Duraci\xf3n"}),(0,a.jsxs)("div",{className:"flex items-center gap-3 mt-1",children:[(0,a.jsx)(d.z,{type:"button",variant:"outline",size:"icon",className:"h-8 w-8",onClick:()=>_(e=>Math.max(1,e-1)),disabled:C<=1,children:(0,a.jsx)(x,{className:"h-4 w-4"})}),(0,a.jsxs)("span",{className:"font-bold text-center w-20",children:[C," ",C>1?"horas":"hora"]}),(0,a.jsx)(d.z,{type:"button",variant:"outline",size:"icon",className:"h-8 w-8",onClick:()=>_(e=>e+1),children:(0,a.jsx)(v,{className:"h-4 w-4"})})]})]})]}),(0,a.jsxs)("div",{className:"pt-4 border-t",children:[(0,a.jsxs)("div",{className:"flex justify-between items-center mb-4",children:[(0,a.jsx)("span",{className:"font-semibold",children:"Total a pagar:"}),(0,a.jsxs)("span",{className:"text-2xl font-bold text-primary",children:["S/ ",D.toFixed(2)]})]}),P&&(0,a.jsxs)(u.bZ,{variant:"destructive",className:"mb-4",children:[(0,a.jsx)(g.Z,{className:"h-4 w-4"}),(0,a.jsx)(u.X,{children:P})]}),(0,a.jsx)(d.z,{onClick:F,disabled:z||!Z,className:"w-full",size:"lg",children:z?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(p.Z,{className:"mr-2 h-4 w-4 animate-spin"})," Procesando..."]}):(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(y.Z,{className:"mr-2 h-4 w-4"}),"Ir a Pagar"]})})]})]})]})})]})}},5937:function(e,t,r){"use strict";r.d(t,{X:function(){return d},bZ:function(){return l}});var a=r(7437),s=r(2265),n=r(535),i=r(3448);let o=(0,n.j)("relative w-full rounded-lg border p-4 [&>svg~*]:pl-7 [&>svg+div]:translate-y-[-3px] [&>svg]:absolute [&>svg]:left-4 [&>svg]:top-4 [&>svg]:text-foreground",{variants:{variant:{default:"bg-background text-foreground",destructive:"border-destructive/50 text-destructive dark:border-destructive [&>svg]:text-destructive"}},defaultVariants:{variant:"default"}}),l=s.forwardRef((e,t)=>{let{className:r,variant:s,...n}=e;return(0,a.jsx)("div",{ref:t,role:"alert",className:(0,i.cn)(o({variant:s}),r),...n})});l.displayName="Alert",s.forwardRef((e,t)=>{let{className:r,...s}=e;return(0,a.jsx)("h5",{ref:t,className:(0,i.cn)("mb-1 font-medium leading-none tracking-tight",r),...s})}).displayName="AlertTitle";let d=s.forwardRef((e,t)=>{let{className:r,...s}=e;return(0,a.jsx)("div",{ref:t,className:(0,i.cn)("text-sm [&_p]:leading-relaxed",r),...s})});d.displayName="AlertDescription"},6246:function(e,t,r){"use strict";r.d(t,{Avatar:function(){return o},AvatarFallback:function(){return d},AvatarImage:function(){return l}});var a=r(7437),s=r(2265),n=r(4930),i=r(3448);let o=s.forwardRef((e,t)=>{let{className:r,...s}=e;return(0,a.jsx)(n.fC,{ref:t,className:(0,i.cn)("relative flex h-10 w-10 shrink-0 overflow-hidden rounded-full",r),...s})});o.displayName=n.fC.displayName;let l=s.forwardRef((e,t)=>{let{className:r,...s}=e;return(0,a.jsx)(n.Ee,{ref:t,className:(0,i.cn)("aspect-square h-full w-full",r),...s})});l.displayName=n.Ee.displayName;let d=s.forwardRef((e,t)=>{let{className:r,...s}=e;return(0,a.jsx)(n.NY,{ref:t,className:(0,i.cn)("flex h-full w-full items-center justify-center rounded-full bg-muted",r),...s})});d.displayName=n.NY.displayName},2381:function(e,t,r){"use strict";r.d(t,{d:function(){return l},z:function(){return d}});var a=r(7437),s=r(2265),n=r(7053),i=r(535),o=r(3448);let l=(0,i.j)("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),d=s.forwardRef((e,t)=>{let{className:r,variant:s,size:i,asChild:d=!1,...c}=e,u=d?n.g7:"button";return(0,a.jsx)(u,{className:(0,o.cn)(l({variant:s,size:i,className:r})),ref:t,...c})});d.displayName="Button"},9820:function(e,t,r){"use strict";r.d(t,{Ol:function(){return o},SZ:function(){return d},Zb:function(){return i},aY:function(){return c},ll:function(){return l}});var a=r(7437),s=r(2265),n=r(3448);let i=s.forwardRef((e,t)=>{let{className:r,...s}=e;return(0,a.jsx)("div",{ref:t,className:(0,n.cn)("rounded-lg border bg-card text-card-foreground shadow-sm",r),...s})});i.displayName="Card";let o=s.forwardRef((e,t)=>{let{className:r,...s}=e;return(0,a.jsx)("div",{ref:t,className:(0,n.cn)("flex flex-col space-y-1.5 p-6",r),...s})});o.displayName="CardHeader";let l=s.forwardRef((e,t)=>{let{className:r,...s}=e;return(0,a.jsx)("div",{ref:t,className:(0,n.cn)("text-2xl font-semibold leading-none tracking-tight",r),...s})});l.displayName="CardTitle";let d=s.forwardRef((e,t)=>{let{className:r,...s}=e;return(0,a.jsx)("div",{ref:t,className:(0,n.cn)("text-sm text-muted-foreground",r),...s})});d.displayName="CardDescription";let c=s.forwardRef((e,t)=>{let{className:r,...s}=e;return(0,a.jsx)("div",{ref:t,className:(0,n.cn)("p-6 pt-0",r),...s})});c.displayName="CardContent",s.forwardRef((e,t)=>{let{className:r,...s}=e;return(0,a.jsx)("div",{ref:t,className:(0,n.cn)("flex items-center p-6 pt-0",r),...s})}).displayName="CardFooter"},5060:function(e,t,r){"use strict";r.d(t,{_:function(){return d}});var a=r(7437),s=r(2265),n=r(6394),i=r(535),o=r(3448);let l=(0,i.j)("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),d=s.forwardRef((e,t)=>{let{className:r,...s}=e;return(0,a.jsx)(n.f,{ref:t,className:(0,o.cn)(l(),r),...s})});d.displayName=n.f.displayName},5291:function(e,t,r){"use strict";r.d(t,{Bw:function(){return h},Ph:function(){return c},Ql:function(){return x},i4:function(){return f},ki:function(){return u}});var a=r(7437),s=r(2265),n=r(8856),i=r(875),o=r(2135),l=r(401),d=r(3448);let c=n.fC;n.ZA;let u=n.B4,f=s.forwardRef((e,t)=>{let{className:r,children:s,...o}=e;return(0,a.jsxs)(n.xz,{ref:t,className:(0,d.cn)("flex h-10 w-full items-center justify-between rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1",r),...o,children:[s,(0,a.jsx)(n.JO,{asChild:!0,children:(0,a.jsx)(i.Z,{className:"h-4 w-4 opacity-50"})})]})});f.displayName=n.xz.displayName;let m=s.forwardRef((e,t)=>{let{className:r,...s}=e;return(0,a.jsx)(n.u_,{ref:t,className:(0,d.cn)("flex cursor-default items-center justify-center py-1",r),...s,children:(0,a.jsx)(o.Z,{className:"h-4 w-4"})})});m.displayName=n.u_.displayName;let p=s.forwardRef((e,t)=>{let{className:r,...s}=e;return(0,a.jsx)(n.$G,{ref:t,className:(0,d.cn)("flex cursor-default items-center justify-center py-1",r),...s,children:(0,a.jsx)(i.Z,{className:"h-4 w-4"})})});p.displayName=n.$G.displayName;let h=s.forwardRef((e,t)=>{let{className:r,children:s,position:i="popper",...o}=e;return(0,a.jsx)(n.h_,{children:(0,a.jsxs)(n.VY,{ref:t,className:(0,d.cn)("relative z-50 max-h-96 min-w-[8rem] overflow-hidden rounded-md border bg-popover text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2","popper"===i&&"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",r),position:i,...o,children:[(0,a.jsx)(m,{}),(0,a.jsx)(n.l_,{className:(0,d.cn)("p-1","popper"===i&&"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)]"),children:s}),(0,a.jsx)(p,{})]})})});h.displayName=n.VY.displayName,s.forwardRef((e,t)=>{let{className:r,...s}=e;return(0,a.jsx)(n.__,{ref:t,className:(0,d.cn)("py-1.5 pl-8 pr-2 text-sm font-semibold",r),...s})}).displayName=n.__.displayName;let x=s.forwardRef((e,t)=>{let{className:r,children:s,...i}=e;return(0,a.jsxs)(n.ck,{ref:t,className:(0,d.cn)("relative flex w-full cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",r),...i,children:[(0,a.jsx)("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:(0,a.jsx)(n.wU,{children:(0,a.jsx)(l.Z,{className:"h-4 w-4"})})}),(0,a.jsx)(n.eT,{children:s})]})});x.displayName=n.ck.displayName,s.forwardRef((e,t)=>{let{className:r,...s}=e;return(0,a.jsx)(n.Z0,{ref:t,className:(0,d.cn)("-mx-1 my-1 h-px bg-muted",r),...s})}).displayName=n.Z0.displayName},1837:function(e,t,r){"use strict";var a=r(3464),s=r(1614);let n=a.Z.create({baseURL:"https://tutorgo-api.onrender.com/api/v1",headers:{"Content-Type":"application/json"}});console.log(n.defaults.baseURL),n.interceptors.request.use(e=>{let t=(0,s.getCookie)("token");return t&&(e.headers.Authorization="Bearer ".concat(t)),e},e=>Promise.reject(e)),t.Z=n},3448:function(e,t,r){"use strict";r.d(t,{cn:function(){return n}});var a=r(1994),s=r(3335);function n(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];return(0,s.m6)((0,a.W)(t))}},8635:function(e,t,r){"use strict";r.d(t,{L:function(){return s},V:function(){return n}});var a=r(1837);let s=async e=>{try{let t=await a.Z.post("/reservas/iniciar-pago",e);if(t.data&&t.data.success)return t.data.data;throw Error(t.data.message||"La respuesta del servidor no fue la esperada.")}catch(e){var t,r;throw Error((null===(r=e.response)||void 0===r?void 0:null===(t=r.data)||void 0===t?void 0:t.message)||"No se pudo iniciar la reserva.")}},n=async e=>{try{let t=await a.Z.post("/reservas/confirmar-pago/".concat(e));if(t.data&&t.data.success)return t.data.data;throw Error(t.data.message||"La respuesta del servidor no fue la esperada.")}catch(e){var t,r;throw Error((null===(r=e.response)||void 0===r?void 0:null===(t=r.data)||void 0===t?void 0:t.message)||"El pago no pudo ser confirmado.")}}},5181:function(e,t,r){"use strict";r.d(t,{P:function(){return s},a:function(){return n}});var a=r(1837);let s=async()=>{try{return(await a.Z.get("/sesiones/mis-solicitudes")).data||[]}catch(a){var e,t,r;if((null===(e=a.response)||void 0===e?void 0:e.status)===204)return[];throw Error((null===(r=a.response)||void 0===r?void 0:null===(t=r.data)||void 0===t?void 0:t.message)||"Error al obtener tus tutor\xedas.")}},n=async e=>{try{return(await a.Z.get("/tutores/".concat(e,"/disponibilidades"))).data||[]}catch(e){var t,r,s;if((null===(t=e.response)||void 0===t?void 0:t.status)===204)return[];throw Error((null===(s=e.response)||void 0===s?void 0:null===(r=s.data)||void 0===r?void 0:r.message)||"No se pudo cargar la disponibilidad del tutor.")}}},4930:function(e,t,r){"use strict";r.d(t,{Ee:function(){return N},NY:function(){return b},fC:function(){return y}});var a=r(2265),s=r(3966),n=r(6606),i=r(1188),o=r(6840),l=r(7437),d="Avatar",[c,u]=(0,s.b)(d),[f,m]=c(d),p=a.forwardRef((e,t)=>{let{__scopeAvatar:r,...s}=e,[n,i]=a.useState("idle");return(0,l.jsx)(f,{scope:r,imageLoadingStatus:n,onImageLoadingStatusChange:i,children:(0,l.jsx)(o.WV.span,{...s,ref:t})})});p.displayName=d;var h="AvatarImage",x=a.forwardRef((e,t)=>{let{__scopeAvatar:r,src:s,onLoadingStatusChange:d=()=>{},...c}=e,u=m(h,r),f=function(e,t){let[r,s]=a.useState("idle");return(0,i.b)(()=>{if(!e){s("error");return}let r=!0,a=new window.Image,n=e=>()=>{r&&s(e)};return s("loading"),a.onload=n("loaded"),a.onerror=n("error"),a.src=e,t&&(a.referrerPolicy=t),()=>{r=!1}},[e,t]),r}(s,c.referrerPolicy),p=(0,n.W)(e=>{d(e),u.onImageLoadingStatusChange(e)});return(0,i.b)(()=>{"idle"!==f&&p(f)},[f,p]),"loaded"===f?(0,l.jsx)(o.WV.img,{...c,ref:t,src:s}):null});x.displayName=h;var v="AvatarFallback",g=a.forwardRef((e,t)=>{let{__scopeAvatar:r,delayMs:s,...n}=e,i=m(v,r),[d,c]=a.useState(void 0===s);return a.useEffect(()=>{if(void 0!==s){let e=window.setTimeout(()=>c(!0),s);return()=>window.clearTimeout(e)}},[s]),d&&"loaded"!==i.imageLoadingStatus?(0,l.jsx)(o.WV.span,{...n,ref:t}):null});g.displayName=v;var y=p,N=x,b=g},6394:function(e,t,r){"use strict";r.d(t,{f:function(){return o}});var a=r(2265),s=r(6840),n=r(7437),i=a.forwardRef((e,t)=>(0,n.jsx)(s.WV.label,{...e,ref:t,onMouseDown:t=>{var r;t.target.closest("button, input, select, textarea")||(null===(r=e.onMouseDown)||void 0===r||r.call(e,t),!t.defaultPrevented&&t.detail>1&&t.preventDefault())}}));i.displayName="Label";var o=i}},function(e){e.O(0,[144,14,514,794,33,971,117,744],function(){return e(e.s=1237)}),_N_E=e.O()}]);